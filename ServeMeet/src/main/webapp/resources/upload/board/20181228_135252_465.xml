<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BoardComment">


<!--comment.setCno(rset.getInt("CNO"));
				comment.setBid(bid);
				comment.setCcontent(rset.getString("CCONTENT"));
				comment.setCwriter(rset.getString("USERNAME"));
				comment.setCdate(rset.getDate("CDATE"));
				comment.setRefcno(rset.getInt("REFCNO"));
				comment.setClevel(rset.getInt("CLEVEL"));  -->
				
	<resultMap type="BoardComment" id="resultBC">
		<id property="cno" column=""/>
		<result property="cwriter" column="USERNAME"/>
	</resultMap>				
	<select id = "selectList" parameterType="_int" resultMap="resultBC">
	SELECT B.*, (SELECT USERNAME FROM MEMBER WHERE USERID = CWRITER) USERNAME 
  			 FROM BOARD_COMMENT B WHERE BID = #{bid}
  			 START WITH CLEVEL = '1'
			 CONNECT BY PRIOR  CNO = REFCNO
	</select>
	<insert id="insertComment" parameterType="BoardComment">
		INSERT INTO BOARD_COMMENT VALUES(SEQ_CNO.NEXTVAL, #{bid},#{ccontent}, #{cwriter}, DEFAULT, #{refcno}, #{clevel})
	</insert>
	<update id="updateComment" parameterType="BoardComment">
		UPDATE BOARD_COMMENT SET CCONTENT = #{ccontent} WHERE CNO = #{cno}
	</update>
	<delete id="deleteComment" parameterType="_int">
		DELETE FROM BOARD_COMMENT WHERE CNO = #{cno}
	</delete>

</mapper>
